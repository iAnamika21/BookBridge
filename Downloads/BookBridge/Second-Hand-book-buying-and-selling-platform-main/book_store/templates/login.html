
{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Login Page -->
<section style="min-height: 100vh; display: flex; align-items: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 2rem 0;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-8">
                <div class="login-container" style="background: white; border-radius: 24px; overflow: hidden; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);">
                    <div class="row g-0 min-vh-50">
                        <!-- Left Side - Welcome Section -->
                        <div class="col-lg-6" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; padding: 3rem; position: relative; overflow: hidden;">
                            <!-- Background Pattern -->
                            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-image: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);"></div>
                            
                            <!-- Floating Shapes -->
                            <div class="floating-shapes" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0;">
                                <div style="position: absolute; width: 100px; height: 100px; background: rgba(255,255,255,0.1); border-radius: 50%; top: 20%; left: 10%; animation: float 6s ease-in-out infinite;"></div>
                                <div style="position: absolute; width: 60px; height: 60px; background: rgba(255,255,255,0.1); border-radius: 50%; top: 60%; right: 15%; animation: float 6s ease-in-out infinite 2s;"></div>
                                <div style="position: absolute; width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 50%; bottom: 30%; left: 20%; animation: float 6s ease-in-out infinite 4s;"></div>
                            </div>

                            <div class="welcome-content text-center" style="position: relative; z-index: 2; color: white;">
                                <!-- Logo -->
                                <div class="logo-section mb-4">
                                    <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; backdrop-filter: blur(10px);">
                                        <i class="fas fa-book-open" style="font-size: 2rem; color: white;"></i>
                                    </div>
                                    <h2 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem;">
                                        Welcome Back!
                                    </h2>
                                </div>

                                <p style="font-size: 1.1rem; opacity: 0.9; margin-bottom: 2rem; line-height: 1.6;">
                                    Sign in to access thousands of quality second-hand books and continue your reading journey with Boomerang Books.
                                </p>

                                <!-- Features -->
                                <div class="features-list text-left" style="max-width: 300px; margin: 0 auto;">
                                    <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                                        <div style="width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                            <i class="fas fa-book" style="color: white;"></i>
                                        </div>
                                        <span style="font-size: 0.95rem;">Browse thousands of books</span>
                                    </div>
                                    <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                                        <div style="width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                            <i class="fas fa-shopping-cart" style="color: white;"></i>
                                        </div>
                                        <span style="font-size: 0.95rem;">Easy online purchasing</span>
                                    </div>
                                    <div style="display: flex; align-items: center;">
                                        <div style="width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 1rem;">
                                            <i class="fas fa-dollar-sign" style="color: white;"></i>
                                        </div>
                                        <span style="font-size: 0.95rem;">Sell your old books</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Side - Login Form -->
                        <div class="col-lg-6" style="padding: 3rem; display: flex; align-items: center;">
                            <div class="login-form-container" style="width: 100%;">
                                <!-- Header -->
                                <div class="form-header text-center mb-4">
                                    <h3 style="color: #1f2937; font-weight: 700; margin-bottom: 0.5rem; font-family: 'Playfair Display', serif;">
                                        Sign In
                                    </h3>
                                    <p style="color: #6b7280; font-size: 0.95rem;">
                                        Enter your credentials to access your account
                                    </p>
                                </div>

                                <!-- Error Message -->
                                {% if error %}
                                <div style="background: #fef2f2; border: 1px solid #fecaca; color: #dc2626; padding: 1rem; border-radius: 12px; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <span>{{ error }}</span>
                                </div>
                                {% endif %}

                                <!-- Login Form -->
                                <form action="/login" method="post" class="login-form">
                                    {% csrf_token %}
                                    
                                    <!-- Email Field -->
                                    <div class="form-group mb-3">
                                        <label style="color: #374151; font-weight: 600; margin-bottom: 0.5rem; display: block; font-size: 0.875rem;">
                                            Email Address
                                        </label>
                                        <div style="position: relative;">
                                            <input type="email" name="email" required
                                                   placeholder="Enter your email address"
                                                   style="width: 100%; padding: 1rem 1rem 1rem 3rem; border: 2px solid #e5e7eb; border-radius: 12px; font-size: 1rem; outline: none; transition: all 0.3s ease; background: #f9fafb;">
                                            <i class="fas fa-envelope" style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #9ca3af;"></i>
                                        </div>
                                    </div>

                                    <!-- Password Field -->
                                    <div class="form-group mb-4">
                                        <label style="color: #374151; font-weight: 600; margin-bottom: 0.5rem; display: block; font-size: 0.875rem;">
                                            Password
                                        </label>
                                        <div style="position: relative;">
                                            <input type="password" name="password" required
                                                   placeholder="Enter your password"
                                                   style="width: 100%; padding: 1rem 3rem 1rem 3rem; border: 2px solid #e5e7eb; border-radius: 12px; font-size: 1rem; outline: none; transition: all 0.3s ease; background: #f9fafb;"
                                                   id="password">
                                            <i class="fas fa-lock" style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #9ca3af;"></i>
                                            <button type="button" onclick="togglePassword()" style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); background: none; border: none; color: #9ca3af; cursor: pointer; padding: 0.25rem;">
                                                <i class="fas fa-eye" id="toggleIcon"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Remember Me & Forgot Password -->
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                                        <label style="display: flex; align-items: center; color: #6b7280; font-size: 0.875rem; cursor: pointer;">
                                            <input type="checkbox" style="margin-right: 0.5rem; accent-color: #667eea;">
                                            Remember me
                                        </label>
                                        <a href="/reset_password" style="color: #667eea; text-decoration: none; font-size: 0.875rem; font-weight: 600;">
                                            Forgot password?
                                        </a>
                                    </div>

                                    <!-- Login Button -->
                                    <button type="submit" style="width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 1rem; border-radius: 12px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-bottom: 1.5rem;">
                                        <span class="button-text">Sign In</span>
                                        <i class="fas fa-arrow-right" style="margin-left: 0.5rem;"></i>
                                    </button>

                                    <!-- Divider -->
                                    <div style="position: relative; text-align: center; margin: 1.5rem 0;">
                                        <div style="border-top: 1px solid #e5e7eb;"></div>
                                        <span style="background: white; color: #6b7280; padding: 0 1rem; position: absolute; top: -0.5rem; left: 50%; transform: translateX(-50%); font-size: 0.875rem;">
                                            New to Boomerang Books?
                                        </span>
                                    </div>

                                    <!-- Sign Up Link -->
                                    <div class="text-center">
                                        <a href="{% url 'signup' %}" style="display: inline-flex; align-items: center; justify-content: center; width: 100%; padding: 1rem; border: 2px solid #667eea; color: #667eea; text-decoration: none; border-radius: 12px; font-weight: 600; transition: all 0.3s ease;">
                                            <i class="fas fa-user-plus" style="margin-right: 0.5rem;"></i>
                                            Create New Account
                                        </a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
/* Animations */
@keyframes float {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-20px);
    }
}

/* Form Input Focus Effects */
.login-form input:focus {
    border-color: #667eea;
    background: white;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

/* Button Hover Effects */
.login-form button[type="submit"]:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
}

.login-form a:hover {
    background-color: #667eea;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

/* Loading State */
.login-form button[type="submit"].loading {
    background: #9ca3af;
    cursor: not-allowed;
}

.login-form button[type="submit"].loading .button-text {
    display: none;
}

.login-form button[type="submit"].loading::after {
    content: '';
    width: 20px;
    height: 20px;
    border: 2px solid transparent;
    border-top: 2px solid white;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 991px) {
    .login-container .col-lg-6:first-child {
        display: none;
    }
    
    .login-container {
        margin: 1rem;
    }
}

@media (max-width: 768px) {
    .login-container .col-lg-6 {
        padding: 2rem 1.5rem;
    }
    
    .form-header h3 {
        font-size: 1.75rem;
    }
}

/* Custom animations for form elements */
.form-group {
    animation: slideUp 0.5s ease forwards;
}

.form-group:nth-child(1) { animation-delay: 0.1s; }
.form-group:nth-child(2) { animation-delay: 0.2s; }
.form-group:nth-child(3) { animation-delay: 0.3s; }

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Focus states for better accessibility */
.login-form input:focus-visible {
    outline: 2px solid #667eea;
    outline-offset: 2px;
}

.login-form button:focus-visible {
    outline: 2px solid #667eea;
    outline-offset: 2px;
}

/* Smooth transitions */
* {
    transition: all 0.3s ease;
}
</style>

<script>
// Toggle password visibility
function togglePassword() {
    const passwordInput = document.getElementById('password');
    const toggleIcon = document.getElementById('toggleIcon');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleIcon.classList.remove('fa-eye');
        toggleIcon.classList.add('fa-eye-slash');
    } else {
        passwordInput.type = 'password';
        toggleIcon.classList.remove('fa-eye-slash');
        toggleIcon.classList.add('fa-eye');
    }
}

// Form submission with loading state
document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.querySelector('.login-form');
    const submitButton = loginForm.querySelector('button[type="submit"]');
    
    loginForm.addEventListener('submit', function(e) {
        // Add loading state
        submitButton.classList.add('loading');
        submitButton.disabled = true;
        
        // Remove loading state after form submission (in case of errors)
        setTimeout(() => {
            submitButton.classList.remove('loading');
            submitButton.disabled = false;
        }, 3000);
    });

    // Add focus effects to form inputs
    const inputs = document.querySelectorAll('.login-form input');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.style.transform = 'scale(1.02)';
        });
        
        input.addEventListener('blur', function() {
            this.parentElement.style.transform = 'scale(1)';
        });
    });

    // Validate form fields in real-time
    const emailInput = document.querySelector('input[name="email"]');
    const passwordInput = document.querySelector('input[name="password"]');
    
    emailInput.addEventListener('input', function() {
        const isValid = this.value.includes('@') && this.value.includes('.');
        this.style.borderColor = isValid ? '#10b981' : '#e5e7eb';
    });
    
    passwordInput.addEventListener('input', function() {
        const isValid = this.value.length >= 6;
        this.style.borderColor = isValid ? '#10b981' : '#e5e7eb';
    });

    // Add enter key support for better UX
    inputs.forEach((input, index) => {
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                if (index < inputs.length - 1) {
                    inputs[index + 1].focus();
                } else {
                    submitButton.click();
                }
            }
        });
    });
});

// Add some nice visual feedback
document.addEventListener('DOMContentLoaded', function() {
    const container = document.querySelector('.login-container');
    container.style.opacity = '0';
    container.style.transform = 'translateY(30px)';
    
    setTimeout(() => {
        container.style.opacity = '1';
        container.style.transform = 'translateY(0)';
    }, 100);
});
</script>
{% endblock %}